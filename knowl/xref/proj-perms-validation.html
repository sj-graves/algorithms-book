<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body class="ignore-math">
<article class="activity project-like"><h4 class="heading">
<span class="type">Activity</span><span class="space"> </span><span class="codenumber">2.3</span><span class="period">.</span><span class="space"> </span><span class="title">Flesh out <code class="code-inline tex2jax_ignore">__init__</code> with input validation.</span>
</h4>
<div class="introduction"><div class="para">In order to start building a useful permutation class, we make the assumption that the input has to be in one-line notation. This is easy to change later once we have a better understanding of what we want from our permutation code.</div></div>
<article class="task exercise-like"><h5 class="heading"><span class="codenumber">(a)</span></h5>
<div class="para">Implement your algorithm in the <code class="code-inline tex2jax_ignore">AlgoPerm</code> class. Begin by editing the <code class="code-inline tex2jax_ignore">__init__</code> method of <code class="code-inline tex2jax_ignore">AlgoPerm</code> so that it looks as follows:</div>
<div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><pre class="program"><code class="language-py">def __init__(self, mapping, domain=None):
    # Check to see whether mapping provides a valid permutation.
    if type(mapping) == dict:
        # This is effectively two-line notation. Each value must also be a key.
        #
        # Change the following line to validate the input!!!
        keyset_equals_valueset = False
        #
        if keyset_equals_valueset:
            # This use of '.copy()' has to do with data in memory versus
            #    the name of a variable.
            map_dict = mapping.copy()
        else:
            raise ValueError("Mapping does not specify valid permutation as dictionary.")
    elif type(mapping) == list:
        # One-line notation. Have to check that the mapping corresponds to
        # the list [1, 2, ..., k] for some k.
        #
        # Change the following line to validate the input!!!
        valid_oneline = False
        #
        if valid_oneline:
            # build the mapping dictionary
            map_dict = { }
            for i in range(maxx):
                map_dict[i+1] = mapping[i]
        else:
            raise ValueError("Mapping does not specify valid one-line notation.")
    elif type(mapping) == tuple:
        # Cycle notation. This is tricky! Skip it for now.
        raise NotImplementedError("Cannot currently define a permutation from cycle tuples")
    else:
        raise TypeError(f"Mapping must be list (oneline notation), tuple (cycle notation), or dictionary, not {type(mapping)}.")
    #
    # We'll rewrite this later:
    if domain!=None:
        pass
    set_domain = set(map_dict.keys())

    # Assign the value of map_dict into the self.mapping attribute
    self._mapping = map_dict

    # Set all attributes other than the canonical data storage.
    self._domain = set_domain
</code></pre></div>
<div class="para">If you copied and pasted that into your file, it is likely that you are having errors. Try typing it in by hand instead.</div></article><article class="task exercise-like"><h5 class="heading"><span class="codenumber">(b)</span></h5>
<div class="para">Correct the two data validation lines from the code.</div></article><article class="task exercise-like"><h5 class="heading"><span class="codenumber">(c)</span></h5>
<div class="para">In your <code class="code-inline tex2jax_ignore">aam_proj2.py</code> file, test your newly defined and corrected class. Add the following lines to the bottom of the <code class="code-inline tex2jax_ignore">aam_proj2.py</code> file and execute it.</div>
<div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><pre class="program"><code class="language-py">a = AlgoPerm([2, 1, 5, 6, 3, 4, 10, 9, 8, 7])
print(f"a = {a}")

b = AlgoPerm({1: 2, 2: 3, 3: 5, 5: 1, 4: 4, 6: 6, 7: 7, 8: 8})
print(f"b = {b}")
</code></pre></div></article></article><span class="incontext"><a class="internal" href="sec-perms-oop.html#proj-perms-validation">in-context</a></span>
</body>
</html>
